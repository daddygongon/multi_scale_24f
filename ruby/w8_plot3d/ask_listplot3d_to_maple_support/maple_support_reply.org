#+OPTIONS: ^:{}
#+STARTUP: indent nolineimages overview num
#+TITLE: maple support
#+AUTHOR: Shigeto R. Nishitani
#+EMAIL:     (concat "shigeto_nishitani@mac.com")
#+LANGUAGE:  jp
#+OPTIONS:   H:4 toc:t num:2
#+SETUPFILE: https://fniessen.github.io/org-html-themes/org/theme-readtheorg.setup

* 問い合わせ<2024-11-03 Sun>
#+begin_src mail


2024/11/03 10:38、西谷　滋人 <nishitani@kwansei.ac.jp>のメール:

Dear all,

西谷@関西学院大・工・情報です．生きてるかな？

ちょっと深刻な不具合があって，至急でお教えください．
With(plots):
AA:=
[[-0.020000000000000018, -0.020000000000000018, -3.7184258232142864], 
 [-0.020000000000000018, 0., -3.72770205], 
 [-0.020000000000000018, 0.020000000000000018, -3.730558930357143], 
 [-0.020000000000000018, 0.040000000000000036, -3.728077517857143], 
 [0., -0.020000000000000018, -3.7313690196428584], 
 [0., 0., -3.735288535714286], 
 [0., 0.020000000000000018, -3.7343432464285726], 
 [0., 0.040000000000000036, -3.7288135428571443], 
 [0.020000000000000018, -0.020000000000000018, -3.7304509875000007], 
 [0.020000000000000018, 0., -3.7283030232142846], 
 [0.020000000000000018, 0.020000000000000018, -3.722919239285714], 
 [0.020000000000000018, 0.040000000000000036, -3.7137605750000007], 
 [0.040000000000000036, -0.020000000000000018, -3.719097805357143], 
 [0.040000000000000036, 0., -3.7110172428571437], 
 [0.040000000000000036, 0.020000000000000018, -3.70035745], 
 [0.040000000000000036, 0.040000000000000036, -3.687607376785715]
 ]
listplot3d(AA);

なんですが，Macでは意図通りに表示されるのですが，
Windowsではなんか変な表示になります．

どうすればいいですか？
#+end_src


* 追加 <2024-11-05 Tue>
#+begin_src mail
--------------- Original Message ---------------
From: NISHITANI SHIGETO [nishitani@kwansei.ac.jp]
Sent: 05/11/2024 4:15 PM
To: support_jp@maplesoft.com
Cc: mkawano@maplesoft.com
Subject: Re: Maplesoft 製品に関するお問い合わせ全般： 関西学院大学


Dear all,

西谷@関西学院大・工・情報です．お世話になります．
windowsとMacのスクリーンショットをお送りします．
よろしくご査収ください．
#+end_src

file:./mac_241105.png
file:./windows_screen_shot.png

* 回答 <2024-11-05 Tue>
#+begin_src mail

2024/11/05 16:59、Japan Support <support_jp@maplesoft.com>のメール:

関西学院大 西谷様

お世話になっております。
Maplesoft Japan カスタマーサクセスチーム
技術サポート担当　杉田です。

ご不便おかけして大変申し訳ございません。

Windows版は2024をお使いですが、Mac版は2023またはそれより前のバージョンをお使いではございませんでしょうか。

社内の不具合管理システムを確認いたしましたところ、この互換性の問題は、Mapleが2023から2024へとアップデートされた際に、
「plots」パッケージ内の「listplot3d」コマンドおよびその内部でも使用されている「surfdata」コマンドの仕様が変更されたものによります。

listplot3d および surfdata コマンドは、等間隔（格子状）のXY座標に対して、Zデータをプロットしポリゴンで平面を作成するコマンドになります。

listplot3d では、XY座標は、元のリスト（または行列、リストリスト（＝リストのリスト））のデータサイズ m×n に対して、
１,２,…, m　と 1, 2, …, n と正数のXY座標の格子を作成しプロットします。
surfdata では X範囲とY範囲をユーザが入力することで、
任意の範囲でデータサイズ m×n でそれぞれ均等に分割された格子状にプロットがなされます。

サイバネットシステムの方へお問い合わせ頂いたときに送付いただいた変数 AA へ割り当てたリストリストは、
2023までは、各々のデータが[x, y, z]のセットと認識されていたようですが、
2024では、[値1, 値2, 値3] というような扱いとして認識されており、
全体として「16行×3列」のデータとして認識されプロットされております。
（そのため、Windowsのプロット図形では XY平面が、X=1..16、Y=1..3 となっております。）
これらＭaple 2024での変更に対応した修正Mapleコマンドを添付のワークシートに記載いたしました。
Z座標のみのデータで4×4の行列（またはリストリストでも可）を抽出し、
surfdata コマンドでＸ，Ｙ範囲を指定してプロットすることで、今まで通りのプロットをすることができます。
（おそらく、本来の「listplot3d」や「surfdata」使い方としては、この様な定義が正しいかと存じます。）

また、頂いたリストリストのフォーマットに従う場合、従来の様にプロットが出来るようなプロシージャもサンプルで作成しましたので、
こちらもご参考にしていただければと存じます。
（AＡで定義されているのと同じ定義形式であれば、自動的にサイズおよび最大値最小値を抽出してプロットが出来るようにしています。）
  newlistplot3d := proc(L::{listlist})
local i, j:
local x_range := ListTools:-FindMinimalElement(L[..,1])..ListTools:-FindMaximalElement(L[..,1]):
local y_range := ListTools:-FindMinimalElement(L[..,2])..ListTools:-FindMaximalElement(L[..,2]):
local n_row := nops(ListTools:-Collect(L[..,1])):
local n_column := nops(ListTools:-Collect(L[..,2])):
return plots:-surfdata([seq([seq(L[j,3], j=(i-1)*n_column+1..i*n_column)], i=1..n_row)], x_range, y_range):
end proc:

2025でこの辺りの互換性に関しての修正を予定しております。
（ただし、従来通りになるか何かオプションが必要になるかは未定です。）

以上、よろしくお願いいたします。
#+end_src

* 追加 <2024-11-08 Fri>
#+begin_src mail
2024/11/08 7:35、Japan Support <support_jp@maplesoft.com>のメール:

関西学院大 西谷様

お世話になっております。
Maplesoft Japan カスタマーサクセスチーム
技術サポート担当　杉田です。

Maple 開発チームより追加の回答を得ることが出来ました。
バージョン2024で listplot3dに「source=irregular」オプションの追加をお試しいただけませんでしょうか。

例）
listplot3d(AA, source=irregular)

こちらで以前のフォーマットでの ３× N のリストリストまたは行列の場合のプロットが出来るかと存じます。

以上、よろしくお願いいたします。
#+end_src
